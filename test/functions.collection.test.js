"use strict";
const collection = require("../functions/models/collection");
const wishlist = require("../functions/models/wishlist");
const collectionManager = require("../functions/dataManager/collectionManager");
const collectionErrorHandler = require("../functions/error/collectionErrorHandler");
const gameObject = require("../functions/models/game");
const gameDAO = require("../functions/dataManager/gameManager");
const priceDataManager = require("../functions/dataManager/priceDataManager");
const gamePriceData = require("../functions/models/gamePriceData");
test("Add Game to Wishlist", async () => {
    let partitionKey = '[User]#[erikchaulk]';
    let sortKey = '[CollectionItem]#[Wishlist]#[GameItem]#[Super Mario]';
    let userID = 'erikchaulk';
    let testGame = new gameObject.Game(partitionKey, sortKey, 'Super Mario', 1992, 'Action-Adventure', 'Nintendo 64', 'Nintendo', 'loose');
    let testWishlist = new wishlist.Wishlist(userID);
    jest.setTimeout(30000);
    let response = await collectionManager.addGameToCollection(testGame, testWishlist);
    expect(response).toEqual([testGame]);
});
test("removeGameFromCollection", async () => {
    let partitionKey = '[User]#[erikchaulk]';
    let sortKey = '[CollectionItem]#[Wishlist]#[GameItem]#[Super Mario]';
    let secondSortKey = '[CollectionItem]#[Wishlist]#[GameItem]#[Overwatch]';
    let userID = 'erikchaulk';
    let testGame = new gameObject.Game(partitionKey, sortKey, 'Super Mario', 1992, 'Action-Adventure', 'Nintendo 64', 'Nintendo', 'loose');
    let secondTestGame = new gameObject.Game(partitionKey, secondSortKey, 'Overwatch', 2016, 'First-Person Shooter', 'PC', 'Blizzard', 'cib');
    let testWishlist = new wishlist.Wishlist(userID);
    await collectionManager.addGameToCollection(secondTestGame, testWishlist);
    let response = await collectionManager.removeGameFromCollection(secondTestGame, testWishlist);
    expect(response).toEqual([testGame]);
});
test("modifyGameInCollection", async () => {
    let partitionKey = '[User]#[erikchaulk]';
    let sortKey = '[CollectionItem]#[Wishlist]#[GameItem]#[Super Mario]';
    let userID = 'erikchaulk';
    let testGame = new gameObject.Game(partitionKey, sortKey, 'Super Mario', 1993, 'Action-Adventure', 'Nintendo 64', 'Nintendo', 'loose');
    let testWishlist = new wishlist.Wishlist(userID);
    let response = await collectionManager.modifyGameInCollection(testGame, testWishlist);
    expect(response).toEqual([testGame]);
});
test("getCollection", async () => {
    let partitionKey = '[User]#[erikchaulk]';
    let sortKey = '[CollectionItem]#[Wishlist]#[GameItem]#[Super Mario]';
    let testGame = new gameObject.Game(partitionKey, sortKey, 'Super Mario', 1993, 'Action-Adventure', 'Nintendo 64', 'Nintendo', 'loose');
    let userID = 'erikchaulk';
    let testWishlist = new wishlist.Wishlist(userID);
    let response = await collectionManager.getCollection(testWishlist);
    expect(response).toEqual([testGame]);
});
test("collectionError", async () => {
    let collectionError = new collectionErrorHandler.CollectionError("Game not found in the collection.", 404);
    expect(collectionError.message).toEqual('Collection error, datastore response: Game not found in the collection.');
    expect(collectionError.statusCode).toEqual(404);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVuY3Rpb25zLmNvbGxlY3Rpb24udGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZ1bmN0aW9ucy5jb2xsZWN0aW9uLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxnQ0FBZ0MsQ0FBQyxDQUFDO0FBQzdELE1BQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQ3pELE1BQU0saUJBQWlCLEdBQUcsT0FBTyxDQUFDLDRDQUE0QyxDQUFDLENBQUM7QUFDaEYsTUFBTSxzQkFBc0IsR0FBRyxPQUFPLENBQUMsMkNBQTJDLENBQUMsQ0FBQztBQUNwRixNQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsMEJBQTBCLENBQUMsQ0FBQztBQUN2RCxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsc0NBQXNDLENBQUMsQ0FBQztBQUNoRSxNQUFNLGdCQUFnQixHQUFHLE9BQU8sQ0FBQywyQ0FBMkMsQ0FBQyxDQUFDO0FBQzlFLE1BQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO0FBRW5FLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxLQUFLLElBQUksRUFBRTtJQUNwQyxJQUFJLFlBQVksR0FBRyxxQkFBcUIsQ0FBQTtJQUN4QyxJQUFJLE9BQU8sR0FBRyxzREFBc0QsQ0FBQTtJQUNwRSxJQUFJLE1BQU0sR0FBRyxZQUFZLENBQUM7SUFDMUIsSUFBSSxRQUFRLEdBQUcsSUFBSSxVQUFVLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxPQUFPLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxrQkFBa0IsRUFBRSxhQUFhLEVBQUUsVUFBVSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3ZJLElBQUksWUFBWSxHQUFHLElBQUksUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNqRCxJQUFJLENBQUMsVUFBVSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lB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LE9BQU8sQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDekMsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFJLENBQUMsaUJBQWlCLEVBQUUsS0FBSyxJQUFJLEVBQUU7SUFDL0IsSUFBSSxlQUFlLEdBQUcsSUFBSSxzQkFBc0IsQ0FBQyxlQUFlLENBQUMsbUNBQW1DLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDM0csTUFBTSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMseUVBQXlFLENBQUMsQ0FBQztJQUNuSCxNQUFNLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUNwRCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNvbGxlY3Rpb24gPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL21vZGVscy9jb2xsZWN0aW9uXCIpO1xyXG5jb25zdCB3aXNobGlzdCA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvbW9kZWxzL3dpc2hsaXN0XCIpO1xyXG5jb25zdCBjb2xsZWN0aW9uTWFuYWdlciA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvZGF0YU1hbmFnZXIvY29sbGVjdGlvbk1hbmFnZXJcIik7XHJcbmNvbnN0IGNvbGxlY3Rpb25FcnJvckhhbmRsZXIgPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL2Vycm9yL2NvbGxlY3Rpb25FcnJvckhhbmRsZXJcIik7XHJcbmNvbnN0IGdhbWVPYmplY3QgPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL21vZGVscy9nYW1lXCIpO1xyXG5jb25zdCBnYW1lREFPID0gcmVxdWlyZShcIi4uL2Z1bmN0aW9ucy9kYXRhTWFuYWdlci9nYW1lTWFuYWdlclwiKTtcclxuY29uc3QgcHJpY2VEYXRhTWFuYWdlciA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvZGF0YU1hbmFnZXIvcHJpY2VEYXRhTWFuYWdlclwiKTtcclxuY29uc3QgZ2FtZVByaWNlRGF0YSA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvbW9kZWxzL2dhbWVQcmljZURhdGFcIik7XHJcblxyXG50ZXN0KFwiQWRkIEdhbWUgdG8gV2lzaGxpc3RcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IHBhcnRpdGlvbktleSA9ICdbVXNlcl0jW2VyaWtjaGF1bGtdJ1xyXG4gICAgbGV0IHNvcnRLZXkgPSAnW0NvbGxlY3Rpb25JdGVtXSNbV2lzaGxpc3RdI1tHYW1lSXRlbV0jW1N1cGVyIE1hcmlvXSdcclxuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XHJcbiAgICBsZXQgdGVzdEdhbWUgPSBuZXcgZ2FtZU9iamVjdC5HYW1lKHBhcnRpdGlvbktleSwgc29ydEtleSwgJ1N1cGVyIE1hcmlvJywgMTk5MiwgJ0FjdGlvbi1BZHZlbnR1cmUnLCAnTmludGVuZG8gNjQnLCAnTmludGVuZG8nLCAnbG9vc2UnKTtcclxuICAgIGxldCB0ZXN0V2lzaGxpc3QgPSBuZXcgd2lzaGxpc3QuV2lzaGxpc3QodXNlcklEKTtcclxuICAgIGplc3Quc2V0VGltZW91dCgzMDAwMCk7XHJcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBjb2xsZWN0aW9uTWFuYWdlci5hZGRHYW1lVG9Db2xsZWN0aW9uKHRlc3RHYW1lLCB0ZXN0V2lzaGxpc3QpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKFt0ZXN0R2FtZV0pO1xyXG59KTtcclxuXHJcbnRlc3QoXCJyZW1vdmVHYW1lRnJvbUNvbGxlY3Rpb25cIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IHBhcnRpdGlvbktleSA9ICdbVXNlcl0jW2VyaWtjaGF1bGtdJztcclxuICAgIGxldCBzb3J0S2V5ID0gJ1tDb2xsZWN0aW9uSXRlbV0jW1dpc2hsaXN0XSNbR2FtZUl0ZW1dI1tTdXBlciBNYXJpb10nO1xyXG4gICAgbGV0IHNlY29uZFNvcnRLZXkgPSAnW0NvbGxlY3Rpb25JdGVtXSNbV2lzaGxpc3RdI1tHYW1lSXRlbV0jW092ZXJ3YXRjaF0nO1xyXG4gICAgbGV0IHVzZXJJRCA9ICdlcmlrY2hhdWxrJztcclxuICAgIGxldCB0ZXN0R2FtZSA9IG5ldyBnYW1lT2JqZWN0LkdhbWUocGFydGl0aW9uS2V5LCBzb3J0S2V5LCAnU3VwZXIgTWFyaW8nLCAxOTkyLCAnQWN0aW9uLUFkdmVudHVyZScsICdOaW50ZW5kbyA2NCcsICdOaW50ZW5kbycsICdsb29zZScpO1xyXG4gICAgbGV0IHNlY29uZFRlc3RHYW1lID0gbmV3IGdhbWVPYmplY3QuR2FtZShwYXJ0aXRpb25LZXksIHNlY29uZFNvcnRLZXksICdPdmVyd2F0Y2gnLCAyMDE2LCAnRmlyc3QtUGVyc29uIFNob290ZXInLCAnUEMnLCAnQmxpenphcmQnLCAnY2liJyk7XHJcbiAgICBsZXQgdGVzdFdpc2hsaXN0ID0gbmV3IHdpc2hsaXN0Lldpc2hsaXN0KHVzZXJJRCk7XHJcbiAgICBhd2FpdCBjb2xsZWN0aW9uTWFuYWdlci5hZGRHYW1lVG9Db2xsZWN0aW9uKHNlY29uZFRlc3RHYW1lLCB0ZXN0V2lzaGxpc3QpO1xyXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgY29sbGVjdGlvbk1hbmFnZXIucmVtb3ZlR2FtZUZyb21Db2xsZWN0aW9uKHNlY29uZFRlc3RHYW1lLCB0ZXN0V2lzaGxpc3QpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKFt0ZXN0R2FtZV0pO1xyXG59KTtcclxuXHJcbnRlc3QoXCJtb2RpZnlHYW1lSW5Db2xsZWN0aW9uXCIsIGFzeW5jICgpID0+IHtcclxuICAgIGxldCBwYXJ0aXRpb25LZXkgPSAnW1VzZXJdI1tlcmlrY2hhdWxrXSc7XHJcbiAgICBsZXQgc29ydEtleSA9ICdbQ29sbGVjdGlvbkl0ZW1dI1tXaXNobGlzdF0jW0dhbWVJdGVtXSNbU3VwZXIgTWFyaW9dJztcclxuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XHJcbiAgICBsZXQgdGVzdEdhbWUgPSBuZXcgZ2FtZU9iamVjdC5HYW1lKHBhcnRpdGlvbktleSwgc29ydEtleSwgJ1N1cGVyIE1hcmlvJywgMTk5MywgJ0FjdGlvbi1BZHZlbnR1cmUnLCAnTmludGVuZG8gNjQnLCAnTmludGVuZG8nLCAnbG9vc2UnKTtcclxuICAgIGxldCB0ZXN0V2lzaGxpc3QgPSBuZXcgd2lzaGxpc3QuV2lzaGxpc3QodXNlcklEKTtcclxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGNvbGxlY3Rpb25NYW5hZ2VyLm1vZGlmeUdhbWVJbkNvbGxlY3Rpb24odGVzdEdhbWUsIHRlc3RXaXNobGlzdCk7XHJcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoW3Rlc3RHYW1lXSk7XHJcbn0pO1xyXG5cclxudGVzdChcImdldENvbGxlY3Rpb25cIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IHBhcnRpdGlvbktleSA9ICdbVXNlcl0jW2VyaWtjaGF1bGtdJztcclxuICAgIGxldCBzb3J0S2V5ID0gJ1tDb2xsZWN0aW9uSXRlbV0jW1dpc2hsaXN0XSNbR2FtZUl0ZW1dI1tTdXBlciBNYXJpb10nO1xyXG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWVPYmplY3QuR2FtZShwYXJ0aXRpb25LZXksIHNvcnRLZXksICdTdXBlciBNYXJpbycsIDE5OTMsICdBY3Rpb24tQWR2ZW50dXJlJywgJ05pbnRlbmRvIDY0JywgJ05pbnRlbmRvJywgJ2xvb3NlJyk7XHJcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xyXG4gICAgbGV0IHRlc3RXaXNobGlzdCA9IG5ldyB3aXNobGlzdC5XaXNobGlzdCh1c2VySUQpO1xyXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgY29sbGVjdGlvbk1hbmFnZXIuZ2V0Q29sbGVjdGlvbih0ZXN0V2lzaGxpc3QpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKFt0ZXN0R2FtZV0pO1xyXG59KTtcclxuXHJcbnRlc3QoXCJjb2xsZWN0aW9uRXJyb3JcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IGNvbGxlY3Rpb25FcnJvciA9IG5ldyBjb2xsZWN0aW9uRXJyb3JIYW5kbGVyLkNvbGxlY3Rpb25FcnJvcihcIkdhbWUgbm90IGZvdW5kIGluIHRoZSBjb2xsZWN0aW9uLlwiLCA0MDQpO1xyXG4gICAgZXhwZWN0KGNvbGxlY3Rpb25FcnJvci5tZXNzYWdlKS50b0VxdWFsKCdDb2xsZWN0aW9uIGVycm9yLCBkYXRhc3RvcmUgcmVzcG9uc2U6IEdhbWUgbm90IGZvdW5kIGluIHRoZSBjb2xsZWN0aW9uLicpO1xyXG4gICAgZXhwZWN0KGNvbGxlY3Rpb25FcnJvci5zdGF0dXNDb2RlKS50b0VxdWFsKDQwNCk7XHJcbn0pOyJdfQ==