"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const collection = require("../functions/models/collection");
const wishlist = require("../functions/models/wishlist");
const collectionManager = require("../functions/dataManager/collectionManager");
const collectionErrorHandler = require("../functions/error/collectionErrorHandler");
const gameObject = require("../functions/models/game");
const gameDAO = require("../functions/dataManager/gameManager");
const priceDataManager = require("../functions/dataManager/priceChartingDataManager");
const gamePriceData = require("../functions/models/gamePriceData");
const Interfaces = require("../functions/shared/interfaces/interfaces");
const gamePriceDAO = require("../functions/dataManager/gamePriceDataManager");
const gameCommon = require("../functions/shared/common/game");
test("createCollection", async () => {
    let wishlist = new collection.Collection("erikchaulk", "Col-2");
    let response = await collectionManager.createCollection(wishlist);
    expect(response).toEqual(wishlist);
});
test("Add Game to Wishlist", async () => {
    let inputData = {
        collectionID: 'Col-2',
        gameName: 'Super Mario',
        yearReleased: 1992,
        genre: 'Action-Adventure',
        console: 'Nintendo 64',
        developer: 'Nintendo',
        cover: "https://www.testcoverimageurl.com"
    };
    let userData = {
        userID: 'erikchaulk',
    };
    let gameID = '987654';
    let testGame = new gameObject.Game(gameID, userData.userID, inputData.gameName, inputData.yearReleased, inputData.genre, inputData.console, inputData.developer, inputData.cover, inputData.collectionID);
    testGame.priceMonitorData = [];
    let response = await collectionManager.addGameToCollection(testGame);
    expect(response).toEqual([testGame]);
});
test("Add Game to Wishlist that already exists", async () => {
    let inputData = {
        collectionID: 'Col-2',
        gameName: 'Super Mario',
        yearReleased: 1992,
        genre: 'Action-Adventure',
        console: 'Nintendo 64',
        developer: 'Nintendo',
        cover: "https://www.testcoverimageurl.com"
    };
    let userData = {
        userID: 'erikchaulk',
    };
    let gameID = '987654';
    let testGame = new gameObject.Game(gameID, userData.userID, inputData.gameName, inputData.yearReleased, inputData.genre, inputData.console, inputData.developer, inputData.cover, inputData.collectionID);
    console.log(testGame);
    testGame.priceMonitorData = [];
    await expect(collectionManager.addGameToCollection(testGame))
        .rejects
        .toThrow("Game error, datastore response: Unable to create game.  Game already exists in collection.");
});
test("removeGameFromCollection", async () => {
    let inputData = {
        collectionID: 'Col-2',
        gameName: 'Super Mario',
        yearReleased: 1992,
        genre: 'Action-Adventure',
        console: 'Nintendo 64',
        developer: 'Nintendo',
        cover: "https://www.testcoverimageurl.com"
    };
    let inputDataForSecondGame = {
        collectionID: 'Col-2',
        gameName: 'Overwatch',
        yearReleased: 2016,
        genre: 'First-Person Shooter',
        console: 'PC',
        developer: 'Blizzard',
        cover: "https://www.testcoverimageurl.com"
    };
    let userData = {
        userID: 'erikchaulk',
    };
    let gameID = '987654';
    let secondGameID = '667788';
    let testGame = new gameObject.Game(gameID, userData.userID, inputData.gameName, inputData.yearReleased, inputData.genre, inputData.console, inputData.developer, inputData.cover, inputData.collectionID);
    let secondTestGame = new gameObject.Game(secondGameID, userData.userID, inputDataForSecondGame.gameName, inputDataForSecondGame.yearReleased, inputDataForSecondGame.genre, inputDataForSecondGame.console, inputDataForSecondGame.developer, inputDataForSecondGame.cover, inputDataForSecondGame.collectionID);
    testGame.priceMonitorData = [];
    secondTestGame.priceMonitorData = [];
    let addSecondGameToCollection = await collectionManager.addGameToCollection(secondTestGame);
    let response = await collectionManager.removeGameFromCollection(secondTestGame);
    expect(response).toEqual([testGame]);
});
test("Remove a game that does not exist in a collection (i.e. attempt to remove a game that was already removed)", async () => {
    let inputDataForSecondGame = {
        collectionID: 'Col-2',
        gameName: 'Overwatch',
        yearReleased: 2016,
        genre: 'First-Person Shooter',
        console: 'PC',
        developer: 'Blizzard',
        cover: "https://www.testcoverimageurl.com"
    };
    let userData = {
        userID: 'erikchaulk',
    };
    let secondGameID = '667788';
    let secondTestGame = new gameObject.Game(secondGameID, userData.userID, inputDataForSecondGame.gameName, inputDataForSecondGame.yearReleased, inputDataForSecondGame.genre, inputDataForSecondGame.console, inputDataForSecondGame.developer, inputDataForSecondGame.cover, inputDataForSecondGame.collectionID);
    await expect(collectionManager.removeGameFromCollection(secondTestGame))
        .rejects
        .toThrow("Game error, datastore response: Unable to delete game.  Unable to find game in collection.");
});
test("modifyGameInCollection", async () => {
    let inputData = {
        collectionID: 'Col-2',
        gameName: 'Super Mario',
        yearReleased: 1993,
        genre: 'Action-Adventure',
        console: 'Nintendo 64',
        developer: 'Nintendo',
        cover: "https://www.testcoverimageurl.com"
    };
    let userData = {
        userID: 'erikchaulk',
    };
    let gameID = '987654';
    let testGame = new gameObject.Game(gameID, userData.userID, inputData.gameName, inputData.yearReleased, inputData.genre, inputData.console, inputData.developer, inputData.cover, inputData.collectionID);
    testGame.priceMonitorData = [];
    let response = await collectionManager.modifyGameInCollection(testGame);
    expect(response).toEqual([testGame]);
});
test("Modify a game that does not exist in the collection.", async () => {
    let inputData = {
        collectionID: 'Col-2',
        gameName: 'Super Smash Brothers',
        yearReleased: 1993,
        genre: 'Fighting',
        console: 'Nintendo 64',
        developer: 'Nintendo',
        cover: "https://www.testcoverimageurl.com"
    };
    let userData = {
        userID: 'erikchaulk',
    };
    let gameID = '331122';
    let testGame = new gameObject.Game(gameID, userData.userID, inputData.gameName, inputData.yearReleased, inputData.genre, inputData.console, inputData.developer, inputData.cover, inputData.collectionID);
    await expect(collectionManager.modifyGameInCollection(testGame))
        .rejects
        .toThrow("Game error, datastore response: Unable to modify game.  Unable to find game in collection.");
});
test("getGameInCollection", async () => {
    let inputData = {
        collectionID: 'Col-2',
        gameName: 'Super Mario',
        yearReleased: 1993,
        genre: 'Action-Adventure',
        console: 'Nintendo 64',
        developer: 'Nintendo',
        cover: "https://www.testcoverimageurl.com"
    };
    let userData = {
        userID: 'erikchaulk',
    };
    let gameID = '987654';
    let testGame = new gameObject.Game(gameID, userData.userID, inputData.gameName, inputData.yearReleased, inputData.genre, inputData.console, inputData.developer, inputData.cover, inputData.collectionID);
    let response = await collectionManager.getGameInCollection(testGame);
    expect(response).toEqual(testGame);
});
test("Attempt to get a game that doesn't exist in the collection", async () => {
    let inputData = {
        collectionID: '1',
        gameName: 'Super Mario',
        yearReleased: 1993,
        genre: 'Action-Adventure',
        console: 'Nintendo 64',
        developer: 'Nintendo',
        cover: "https://www.testcoverimageurl.com"
    };
    let userData = {
        userID: 'erikchaulk',
    };
    //The game ID is the only different attribute, which causes it to not be found and throw an error.
    let gameID = '009988';
    let testGame = new gameObject.Game(gameID, userData.userID, inputData.gameName, inputData.yearReleased, inputData.genre, inputData.console, inputData.developer, inputData.cover, inputData.collectionID);
    await expect(collectionManager.getGameInCollection(testGame))
        .rejects
        .toThrow("Game error, datastore response: Unable to get game. Game not found.");
});
test("collectionError", async () => {
    let collectionError = new collectionErrorHandler.CollectionError("Game not found in the collection.");
    expect(collectionError.message).toEqual('Collection error, datastore response: Game not found in the collection.');
});
test("getAllGamesInCollection", async () => {
    let inputData = {
        collectionID: 'Col-2',
        gameName: 'Super Mario',
        yearReleased: 1993,
        genre: 'Action-Adventure',
        console: 'Nintendo 64',
        developer: 'Nintendo',
        cover: "https://www.testcoverimageurl.com"
    };
    let userData = {
        userID: 'erikchaulk',
    };
    let gameID = '987654';
    let testGame = new gameObject.Game(gameID, userData.userID, inputData.gameName, inputData.yearReleased, inputData.genre, inputData.console, inputData.developer, inputData.cover, inputData.collectionID);
    testGame.priceMonitorData = [];
    let testWishlist = new wishlist.Wishlist(userData.userID, inputData.collectionID);
    let response = await collectionManager.getAllGamesInCollection(testWishlist);
    expect(response).toEqual([testGame]);
});
test("listCollections", async () => {
    let collectionData = [
        {
            userID: "erikchaulk",
            collectionID: 'Col-2'
        }
    ];
    let userID = "erikchaulk";
    let response = await collectionManager.listCollections("erikchaulk");
    expect(response).toEqual(collectionData);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVuY3Rpb25zLmNvbGxlY3Rpb24udGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImZ1bmN0aW9ucy5jb2xsZWN0aW9uLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFFQSxNQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztBQUM3RCxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsOEJBQThCLENBQUMsQ0FBQztBQUN6RCxNQUFNLGlCQUFpQixHQUFHLE9BQU8sQ0FBQyw0Q0FBNEMsQ0FBQyxDQUFDO0FBQ2hGLE1BQU0sc0JBQXNCLEdBQUcsT0FBTyxDQUFDLDJDQUEyQyxDQUFDLENBQUM7QUFDcEYsTUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDdkQsTUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLHNDQUFzQyxDQUFDLENBQUM7QUFDaEUsTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsbURBQW1ELENBQUMsQ0FBQztBQUN0RixNQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsbUNBQW1DLENBQUMsQ0FBQztBQUNuRSxNQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsMkNBQTJDLENBQUMsQ0FBQztBQUN4RSxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsK0NBQStDLENBQUMsQ0FBQztBQUM5RSxNQUFNLFVBQVUsR0FBRyxPQUFPLENBQUMsaUNBQWlDLENBQUMsQ0FBQztBQUc5RCxJQUFJLENBQUMsa0JBQWtCLEVBQUUsS0FBSyxJQUFJLEVBQUU7SUFDaEMsSUFBSSxRQUFRLEdBQUcsSUFBSSxVQUFVLENBQUMsVUFBVSxDQUFDLFlBQVksRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNoRSxJQUFJLFFBQVEsR0FBRyxNQUFNLGlCQUFpQixDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2xFLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLENB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WUFBWSxFQUFFLE9BQU87U0FDeEI7S0FDSixDQUFBO0lBQ0QsSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFBO0lBQ3pCLElBQUksUUFBUSxHQUFHLE1BQU0saUJBQWlCLENBQUMsZUFBZSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3JFLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxPQUFPLENBQUMsY0FBYyxDQUFDLENBQUM7QUFDN0MsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBXaXNobGlzdCB9IGZyb20gXCIuLi9mdW5jdGlvbnMvbW9kZWxzL3dpc2hsaXN0XCI7XG5cbmNvbnN0IGNvbGxlY3Rpb24gPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL21vZGVscy9jb2xsZWN0aW9uXCIpO1xuY29uc3Qgd2lzaGxpc3QgPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL21vZGVscy93aXNobGlzdFwiKTtcbmNvbnN0IGNvbGxlY3Rpb25NYW5hZ2VyID0gcmVxdWlyZShcIi4uL2Z1bmN0aW9ucy9kYXRhTWFuYWdlci9jb2xsZWN0aW9uTWFuYWdlclwiKTtcbmNvbnN0IGNvbGxlY3Rpb25FcnJvckhhbmRsZXIgPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL2Vycm9yL2NvbGxlY3Rpb25FcnJvckhhbmRsZXJcIik7XG5jb25zdCBnYW1lT2JqZWN0ID0gcmVxdWlyZShcIi4uL2Z1bmN0aW9ucy9tb2RlbHMvZ2FtZVwiKTtcbmNvbnN0IGdhbWVEQU8gPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL2RhdGFNYW5hZ2VyL2dhbWVNYW5hZ2VyXCIpO1xuY29uc3QgcHJpY2VEYXRhTWFuYWdlciA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvZGF0YU1hbmFnZXIvcHJpY2VDaGFydGluZ0RhdGFNYW5hZ2VyXCIpO1xuY29uc3QgZ2FtZVByaWNlRGF0YSA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvbW9kZWxzL2dhbWVQcmljZURhdGFcIik7XG5jb25zdCBJbnRlcmZhY2VzID0gcmVxdWlyZShcIi4uL2Z1bmN0aW9ucy9zaGFyZWQvaW50ZXJmYWNlcy9pbnRlcmZhY2VzXCIpO1xuY29uc3QgZ2FtZVByaWNlREFPID0gcmVxdWlyZShcIi4uL2Z1bmN0aW9ucy9kYXRhTWFuYWdlci9nYW1lUHJpY2VEYXRhTWFuYWdlclwiKTtcbmNvbnN0IGdhbWVDb21tb24gPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL3NoYXJlZC9jb21tb24vZ2FtZVwiKTtcblxuXG50ZXN0KFwiY3JlYXRlQ29sbGVjdGlvblwiLCBhc3luYyAoKSA9PiB7ICAgIFxuICAgIGxldCB3aXNobGlzdCA9IG5ldyBjb2xsZWN0aW9uLkNvbGxlY3Rpb24oXCJlcmlrY2hhdWxrXCIsIFwiQ29sLTJcIik7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgY29sbGVjdGlvbk1hbmFnZXIuY3JlYXRlQ29sbGVjdGlvbih3aXNobGlzdCk7XG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKHdpc2hsaXN0KTtcbn0pO1xuXG50ZXN0KFwiQWRkIEdhbWUgdG8gV2lzaGxpc3RcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBpbnB1dERhdGEgPSB7XG4gICAgICAgIGNvbGxlY3Rpb25JRDogJ0NvbC0yJyxcbiAgICAgICAgZ2FtZU5hbWU6ICdTdXBlciBNYXJpbycsXG4gICAgICAgIHllYXJSZWxlYXNlZDogMTk5MixcbiAgICAgICAgZ2VucmU6ICdBY3Rpb24tQWR2ZW50dXJlJyxcbiAgICAgICAgY29uc29sZTogJ05pbnRlbmRvIDY0JyxcbiAgICAgICAgZGV2ZWxvcGVyOiAnTmludGVuZG8nLFxuICAgICAgICBjb3ZlcjogXCJodHRwczovL3d3dy50ZXN0Y292ZXJpbWFnZXVybC5jb21cIlxuICAgIH1cbiAgICBsZXQgdXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJJRDogJ2VyaWtjaGF1bGsnLFxuICAgIH07XG4gICAgbGV0IGdhbWVJRCA9ICc5ODc2NTQnXG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWVPYmplY3QuR2FtZShnYW1lSUQsIHVzZXJEYXRhLnVzZXJJRCwgaW5wdXREYXRhLmdhbWVOYW1lLCBpbnB1dERhdGEueWVhclJlbGVhc2VkLCBpbnB1dERhdGEuZ2VucmUsIGlucHV0RGF0YS5jb25zb2xlLCBpbnB1dERhdGEuZGV2ZWxvcGVyLCBpbnB1dERhdGEuY292ZXIsIGlucHV0RGF0YS5jb2xsZWN0aW9uSUQpO1xuICAgIHRlc3RHYW1lLnByaWNlTW9uaXRvckRhdGEgPSBbXTtcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBjb2xsZWN0aW9uTWFuYWdlci5hZGRHYW1lVG9Db2xsZWN0aW9uKHRlc3RHYW1lKTtcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoW3Rlc3RHYW1lXSk7XG59KTtcblxudGVzdChcIkFkZCBHYW1lIHRvIFdpc2hsaXN0IHRoYXQgYWxyZWFkeSBleGlzdHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBpbnB1dERhdGEgPSB7XG4gICAgICAgIGNvbGxlY3Rpb25JRDogJ0NvbC0yJyxcbiAgICAgICAgZ2FtZU5hbWU6ICdTdXBlciBNYXJpbycsXG4gICAgICAgIHllYXJSZWxlYXNlZDogMTk5MixcbiAgICAgICAgZ2VucmU6ICdBY3Rpb24tQWR2ZW50dXJlJyxcbiAgICAgICAgY29uc29sZTogJ05pbnRlbmRvIDY0JyxcbiAgICAgICAgZGV2ZWxvcGVyOiAnTmludGVuZG8nLFxuICAgICAgICBjb3ZlcjogXCJodHRwczovL3d3dy50ZXN0Y292ZXJpbWFnZXVybC5jb21cIlxuICAgIH1cbiAgICBsZXQgdXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJJRDogJ2VyaWtjaGF1bGsnLFxuICAgIH07XG4gICAgbGV0IGdhbWVJRCA9ICc5ODc2NTQnXG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWVPYmplY3QuR2FtZShnYW1lSUQsIHVzZXJEYXRhLnVzZXJJRCwgaW5wdXREYXRhLmdhbWVOYW1lLCBpbnB1dERhdGEueWVhclJlbGVhc2VkLCBpbnB1dERhdGEuZ2VucmUsIGlucHV0RGF0YS5jb25zb2xlLCBpbnB1dERhdGEuZGV2ZWxvcGVyLCBpbnB1dERhdGEuY292ZXIsIGlucHV0RGF0YS5jb2xsZWN0aW9uSUQpOyAgICBcbiAgICBjb25zb2xlLmxvZyh0ZXN0R2FtZSk7XG4gICAgdGVzdEdhbWUucHJpY2VNb25pdG9yRGF0YSA9IFtdO1xuICAgIGF3YWl0IGV4cGVjdChjb2xsZWN0aW9uTWFuYWdlci5hZGRHYW1lVG9Db2xsZWN0aW9uKHRlc3RHYW1lKSlcbiAgICAucmVqZWN0c1xuICAgIC50b1Rocm93KFwiR2FtZSBlcnJvciwgZGF0YXN0b3JlIHJlc3BvbnNlOiBVbmFibGUgdG8gY3JlYXRlIGdhbWUuICBHYW1lIGFscmVhZHkgZXhpc3RzIGluIGNvbGxlY3Rpb24uXCIpXG59KTtcblxudGVzdChcInJlbW92ZUdhbWVGcm9tQ29sbGVjdGlvblwiLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGlucHV0RGF0YSA9IHtcbiAgICAgICAgY29sbGVjdGlvbklEOiAnQ29sLTInLFxuICAgICAgICBnYW1lTmFtZTogJ1N1cGVyIE1hcmlvJyxcbiAgICAgICAgeWVhclJlbGVhc2VkOiAxOTkyLFxuICAgICAgICBnZW5yZTogJ0FjdGlvbi1BZHZlbnR1cmUnLFxuICAgICAgICBjb25zb2xlOiAnTmludGVuZG8gNjQnLFxuICAgICAgICBkZXZlbG9wZXI6ICdOaW50ZW5kbycsXG4gICAgICAgIGNvdmVyOiBcImh0dHBzOi8vd3d3LnRlc3Rjb3ZlcmltYWdldXJsLmNvbVwiXG4gICAgfVxuICAgIGxldCBpbnB1dERhdGFGb3JTZWNvbmRHYW1lID0ge1xuICAgICAgICBjb2xsZWN0aW9uSUQ6ICdDb2wtMicsXG4gICAgICAgIGdhbWVOYW1lOiAnT3ZlcndhdGNoJyxcbiAgICAgICAgeWVhclJlbGVhc2VkOiAyMDE2LFxuICAgICAgICBnZW5yZTogJ0ZpcnN0LVBlcnNvbiBTaG9vdGVyJyxcbiAgICAgICAgY29uc29sZTogJ1BDJyxcbiAgICAgICAgZGV2ZWxvcGVyOiAnQmxpenphcmQnLFxuICAgICAgICBjb3ZlcjogXCJodHRwczovL3d3dy50ZXN0Y292ZXJpbWFnZXVybC5jb21cIlxuICAgIH1cbiAgICBsZXQgdXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJJRDogJ2VyaWtjaGF1bGsnLFxuICAgIH07XG4gICAgbGV0IGdhbWVJRCA9ICc5ODc2NTQnO1xuICAgIGxldCBzZWNvbmRHYW1lSUQgPSAnNjY3Nzg4JztcbiAgICBsZXQgdGVzdEdhbWUgPSBuZXcgZ2FtZU9iamVjdC5HYW1lKGdhbWVJRCwgdXNlckRhdGEudXNlcklELCBpbnB1dERhdGEuZ2FtZU5hbWUsIGlucHV0RGF0YS55ZWFyUmVsZWFzZWQsIGlucHV0RGF0YS5nZW5yZSwgaW5wdXREYXRhLmNvbnNvbGUsIGlucHV0RGF0YS5kZXZlbG9wZXIsIGlucHV0RGF0YS5jb3ZlciwgaW5wdXREYXRhLmNvbGxlY3Rpb25JRCk7XG4gICAgbGV0IHNlY29uZFRlc3RHYW1lID0gbmV3IGdhbWVPYmplY3QuR2FtZShzZWNvbmRHYW1lSUQsIHVzZXJEYXRhLnVzZXJJRCwgaW5wdXREYXRhRm9yU2Vjb25kR2FtZS5nYW1lTmFtZSwgaW5wdXREYXRhRm9yU2Vjb25kR2FtZS55ZWFyUmVsZWFzZWQsIGlucHV0RGF0YUZvclNlY29uZEdhbWUuZ2VucmUsIGlucHV0RGF0YUZvclNlY29uZEdhbWUuY29uc29sZSwgaW5wdXREYXRhRm9yU2Vjb25kR2FtZS5kZXZlbG9wZXIsIGlucHV0RGF0YUZvclNlY29uZEdhbWUuY292ZXIsIGlucHV0RGF0YUZvclNlY29uZEdhbWUuY29sbGVjdGlvbklEKTtcbiAgICB0ZXN0R2FtZS5wcmljZU1vbml0b3JEYXRhID0gW11cbiAgICBzZWNvbmRUZXN0R2FtZS5wcmljZU1vbml0b3JEYXRhID0gW107XG4gICAgbGV0IGFkZFNlY29uZEdhbWVUb0NvbGxlY3Rpb24gPSBhd2FpdCBjb2xsZWN0aW9uTWFuYWdlci5hZGRHYW1lVG9Db2xsZWN0aW9uKHNlY29uZFRlc3RHYW1lKTtcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBjb2xsZWN0aW9uTWFuYWdlci5yZW1vdmVHYW1lRnJvbUNvbGxlY3Rpb24oc2Vjb25kVGVzdEdhbWUpO1xuICAgIGV4cGVjdChyZXNwb25zZSkudG9FcXVhbChbdGVzdEdhbWVdKTtcbn0pO1xuXG50ZXN0KFwiUmVtb3ZlIGEgZ2FtZSB0aGF0IGRvZXMgbm90IGV4aXN0IGluIGEgY29sbGVjdGlvbiAoaS5lLiBhdHRlbXB0IHRvIHJlbW92ZSBhIGdhbWUgdGhhdCB3YXMgYWxyZWFkeSByZW1vdmVkKVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGlucHV0RGF0YUZvclNlY29uZEdhbWUgPSB7XG4gICAgICAgIGNvbGxlY3Rpb25JRDogJ0NvbC0yJyxcbiAgICAgICAgZ2FtZU5hbWU6ICdPdmVyd2F0Y2gnLFxuICAgICAgICB5ZWFyUmVsZWFzZWQ6IDIwMTYsXG4gICAgICAgIGdlbnJlOiAnRmlyc3QtUGVyc29uIFNob290ZXInLFxuICAgICAgICBjb25zb2xlOiAnUEMnLFxuICAgICAgICBkZXZlbG9wZXI6ICdCbGl6emFyZCcsXG4gICAgICAgIGNvdmVyOiBcImh0dHBzOi8vd3d3LnRlc3Rjb3ZlcmltYWdldXJsLmNvbVwiXG4gICAgfVxuICAgIGxldCB1c2VyRGF0YSA9IHtcbiAgICAgICAgdXNlcklEOiAnZXJpa2NoYXVsaycsXG4gICAgfTtcbiAgICBsZXQgc2Vjb25kR2FtZUlEID0gJzY2Nzc4OCc7XG4gICAgbGV0IHNlY29uZFRlc3RHYW1lID0gbmV3IGdhbWVPYmplY3QuR2FtZShzZWNvbmRHYW1lSUQsIHVzZXJEYXRhLnVzZXJJRCwgaW5wdXREYXRhRm9yU2Vjb25kR2FtZS5nYW1lTmFtZSwgaW5wdXREYXRhRm9yU2Vjb25kR2FtZS55ZWFyUmVsZWFzZWQsIGlucHV0RGF0YUZvclNlY29uZEdhbWUuZ2VucmUsIGlucHV0RGF0YUZvclNlY29uZEdhbWUuY29uc29sZSwgaW5wdXREYXRhRm9yU2Vjb25kR2FtZS5kZXZlbG9wZXIsIGlucHV0RGF0YUZvclNlY29uZEdhbWUuY292ZXIsIGlucHV0RGF0YUZvclNlY29uZEdhbWUuY29sbGVjdGlvbklEKTtcbiAgICBhd2FpdCBleHBlY3QoY29sbGVjdGlvbk1hbmFnZXIucmVtb3ZlR2FtZUZyb21Db2xsZWN0aW9uKHNlY29uZFRlc3RHYW1lKSlcbiAgICAucmVqZWN0c1xuICAgIC50b1Rocm93KFwiR2FtZSBlcnJvciwgZGF0YXN0b3JlIHJlc3BvbnNlOiBVbmFibGUgdG8gZGVsZXRlIGdhbWUuICBVbmFibGUgdG8gZmluZCBnYW1lIGluIGNvbGxlY3Rpb24uXCIpXG59KTtcblxudGVzdChcIm1vZGlmeUdhbWVJbkNvbGxlY3Rpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBpbnB1dERhdGEgPSB7XG4gICAgICAgIGNvbGxlY3Rpb25JRDogJ0NvbC0yJyxcbiAgICAgICAgZ2FtZU5hbWU6ICdTdXBlciBNYXJpbycsXG4gICAgICAgIHllYXJSZWxlYXNlZDogMTk5MyxcbiAgICAgICAgZ2VucmU6ICdBY3Rpb24tQWR2ZW50dXJlJyxcbiAgICAgICAgY29uc29sZTogJ05pbnRlbmRvIDY0JyxcbiAgICAgICAgZGV2ZWxvcGVyOiAnTmludGVuZG8nLFxuICAgICAgICBjb3ZlcjogXCJodHRwczovL3d3dy50ZXN0Y292ZXJpbWFnZXVybC5jb21cIlxuICAgIH1cbiAgICBcbiAgICBsZXQgdXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJJRDogJ2VyaWtjaGF1bGsnLFxuICAgIH07XG4gICAgbGV0IGdhbWVJRCA9ICc5ODc2NTQnXG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWVPYmplY3QuR2FtZShnYW1lSUQsIHVzZXJEYXRhLnVzZXJJRCwgaW5wdXREYXRhLmdhbWVOYW1lLCBpbnB1dERhdGEueWVhclJlbGVhc2VkLCBpbnB1dERhdGEuZ2VucmUsIGlucHV0RGF0YS5jb25zb2xlLCBpbnB1dERhdGEuZGV2ZWxvcGVyLCBpbnB1dERhdGEuY292ZXIsIGlucHV0RGF0YS5jb2xsZWN0aW9uSUQpO1xuICAgIHRlc3RHYW1lLnByaWNlTW9uaXRvckRhdGEgPSBbXTtcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBjb2xsZWN0aW9uTWFuYWdlci5tb2RpZnlHYW1lSW5Db2xsZWN0aW9uKHRlc3RHYW1lKTtcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoW3Rlc3RHYW1lXSk7XG59KTtcblxudGVzdChcIk1vZGlmeSBhIGdhbWUgdGhhdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgY29sbGVjdGlvbi5cIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBpbnB1dERhdGEgPSB7XG4gICAgICAgIGNvbGxlY3Rpb25JRDogJ0NvbC0yJyxcbiAgICAgICAgZ2FtZU5hbWU6ICdTdXBlciBTbWFzaCBCcm90aGVycycsXG4gICAgICAgIHllYXJSZWxlYXNlZDogMTk5MyxcbiAgICAgICAgZ2VucmU6ICdGaWdodGluZycsXG4gICAgICAgIGNvbnNvbGU6ICdOaW50ZW5kbyA2NCcsXG4gICAgICAgIGRldmVsb3BlcjogJ05pbnRlbmRvJyxcbiAgICAgICAgY292ZXI6IFwiaHR0cHM6Ly93d3cudGVzdGNvdmVyaW1hZ2V1cmwuY29tXCJcbiAgICB9XG4gICAgXG4gICAgbGV0IHVzZXJEYXRhID0ge1xuICAgICAgICB1c2VySUQ6ICdlcmlrY2hhdWxrJyxcbiAgICB9O1xuICAgIGxldCBnYW1lSUQgPSAnMzMxMTIyJ1xuICAgIGxldCB0ZXN0R2FtZSA9IG5ldyBnYW1lT2JqZWN0LkdhbWUoZ2FtZUlELCB1c2VyRGF0YS51c2VySUQsIGlucHV0RGF0YS5nYW1lTmFtZSwgaW5wdXREYXRhLnllYXJSZWxlYXNlZCwgaW5wdXREYXRhLmdlbnJlLCBpbnB1dERhdGEuY29uc29sZSwgaW5wdXREYXRhLmRldmVsb3BlciwgaW5wdXREYXRhLmNvdmVyLCBpbnB1dERhdGEuY29sbGVjdGlvbklEKTtcbiAgICBhd2FpdCBleHBlY3QoY29sbGVjdGlvbk1hbmFnZXIubW9kaWZ5R2FtZUluQ29sbGVjdGlvbih0ZXN0R2FtZSkpXG4gICAgLnJlamVjdHNcbiAgICAudG9UaHJvdyhcIkdhbWUgZXJyb3IsIGRhdGFzdG9yZSByZXNwb25zZTogVW5hYmxlIHRvIG1vZGlmeSBnYW1lLiAgVW5hYmxlIHRvIGZpbmQgZ2FtZSBpbiBjb2xsZWN0aW9uLlwiKVxufSk7XG5cbnRlc3QoXCJnZXRHYW1lSW5Db2xsZWN0aW9uXCIsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgaW5wdXREYXRhID0ge1xuICAgICAgICBjb2xsZWN0aW9uSUQ6ICdDb2wtMicsXG4gICAgICAgIGdhbWVOYW1lOiAnU3VwZXIgTWFyaW8nLFxuICAgICAgICB5ZWFyUmVsZWFzZWQ6IDE5OTMsXG4gICAgICAgIGdlbnJlOiAnQWN0aW9uLUFkdmVudHVyZScsXG4gICAgICAgIGNvbnNvbGU6ICdOaW50ZW5kbyA2NCcsXG4gICAgICAgIGRldmVsb3BlcjogJ05pbnRlbmRvJyxcbiAgICAgICAgY292ZXI6IFwiaHR0cHM6Ly93d3cudGVzdGNvdmVyaW1hZ2V1cmwuY29tXCJcbiAgICB9XG4gICAgXG4gICAgbGV0IHVzZXJEYXRhID0ge1xuICAgICAgICB1c2VySUQ6ICdlcmlrY2hhdWxrJyxcbiAgICB9O1xuICAgIGxldCBnYW1lSUQgPSAnOTg3NjU0J1xuICAgIGxldCB0ZXN0R2FtZSA9IG5ldyBnYW1lT2JqZWN0LkdhbWUoZ2FtZUlELCB1c2VyRGF0YS51c2VySUQsIGlucHV0RGF0YS5nYW1lTmFtZSwgaW5wdXREYXRhLnllYXJSZWxlYXNlZCwgaW5wdXREYXRhLmdlbnJlLCBpbnB1dERhdGEuY29uc29sZSwgaW5wdXREYXRhLmRldmVsb3BlciwgaW5wdXREYXRhLmNvdmVyLCBpbnB1dERhdGEuY29sbGVjdGlvbklEKTtcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBjb2xsZWN0aW9uTWFuYWdlci5nZXRHYW1lSW5Db2xsZWN0aW9uKHRlc3RHYW1lKTtcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwodGVzdEdhbWUpO1xufSk7XG5cbnRlc3QoXCJBdHRlbXB0IHRvIGdldCBhIGdhbWUgdGhhdCBkb2Vzbid0IGV4aXN0IGluIHRoZSBjb2xsZWN0aW9uXCIsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgaW5wdXREYXRhID0ge1xuICAgICAgICBjb2xsZWN0aW9uSUQ6ICcxJyxcbiAgICAgICAgZ2FtZU5hbWU6ICdTdXBlciBNYXJpbycsXG4gICAgICAgIHllYXJSZWxlYXNlZDogMTk5MyxcbiAgICAgICAgZ2VucmU6ICdBY3Rpb24tQWR2ZW50dXJlJyxcbiAgICAgICAgY29uc29sZTogJ05pbnRlbmRvIDY0JyxcbiAgICAgICAgZGV2ZWxvcGVyOiAnTmludGVuZG8nLFxuICAgICAgICBjb3ZlcjogXCJodHRwczovL3d3dy50ZXN0Y292ZXJpbWFnZXVybC5jb21cIlxuICAgIH1cbiAgICBcbiAgICBsZXQgdXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJJRDogJ2VyaWtjaGF1bGsnLFxuICAgIH07XG4gICAgLy9UaGUgZ2FtZSBJRCBpcyB0aGUgb25seSBkaWZmZXJlbnQgYXR0cmlidXRlLCB3aGljaCBjYXVzZXMgaXQgdG8gbm90IGJlIGZvdW5kIGFuZCB0aHJvdyBhbiBlcnJvci5cbiAgICBsZXQgZ2FtZUlEID0gJzAwOTk4OCc7XG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWVPYmplY3QuR2FtZShnYW1lSUQsIHVzZXJEYXRhLnVzZXJJRCwgaW5wdXREYXRhLmdhbWVOYW1lLCBpbnB1dERhdGEueWVhclJlbGVhc2VkLCBpbnB1dERhdGEuZ2VucmUsIGlucHV0RGF0YS5jb25zb2xlLCBpbnB1dERhdGEuZGV2ZWxvcGVyLCBpbnB1dERhdGEuY292ZXIsIGlucHV0RGF0YS5jb2xsZWN0aW9uSUQpO1xuICAgIGF3YWl0IGV4cGVjdChjb2xsZWN0aW9uTWFuYWdlci5nZXRHYW1lSW5Db2xsZWN0aW9uKHRlc3RHYW1lKSlcbiAgICAucmVqZWN0c1xuICAgIC50b1Rocm93KFwiR2FtZSBlcnJvciwgZGF0YXN0b3JlIHJlc3BvbnNlOiBVbmFibGUgdG8gZ2V0IGdhbWUuIEdhbWUgbm90IGZvdW5kLlwiKTtcbn0pO1xuXG50ZXN0KFwiY29sbGVjdGlvbkVycm9yXCIsIGFzeW5jICgpID0+IHtcbiAgICBsZXQgY29sbGVjdGlvbkVycm9yID0gbmV3IGNvbGxlY3Rpb25FcnJvckhhbmRsZXIuQ29sbGVjdGlvbkVycm9yKFwiR2FtZSBub3QgZm91bmQgaW4gdGhlIGNvbGxlY3Rpb24uXCIpO1xuICAgIGV4cGVjdChjb2xsZWN0aW9uRXJyb3IubWVzc2FnZSkudG9FcXVhbCgnQ29sbGVjdGlvbiBlcnJvciwgZGF0YXN0b3JlIHJlc3BvbnNlOiBHYW1lIG5vdCBmb3VuZCBpbiB0aGUgY29sbGVjdGlvbi4nKTtcbn0pO1xuXG50ZXN0KFwiZ2V0QWxsR2FtZXNJbkNvbGxlY3Rpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBpbnB1dERhdGEgPSB7XG4gICAgICAgIGNvbGxlY3Rpb25JRDogJ0NvbC0yJyxcbiAgICAgICAgZ2FtZU5hbWU6ICdTdXBlciBNYXJpbycsXG4gICAgICAgIHllYXJSZWxlYXNlZDogMTk5MyxcbiAgICAgICAgZ2VucmU6ICdBY3Rpb24tQWR2ZW50dXJlJyxcbiAgICAgICAgY29uc29sZTogJ05pbnRlbmRvIDY0JyxcbiAgICAgICAgZGV2ZWxvcGVyOiAnTmludGVuZG8nLFxuICAgICAgICBjb3ZlcjogXCJodHRwczovL3d3dy50ZXN0Y292ZXJpbWFnZXVybC5jb21cIlxuICAgIH1cbiAgICBcbiAgICBsZXQgdXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJJRDogJ2VyaWtjaGF1bGsnLFxuICAgIH07XG4gICAgbGV0IGdhbWVJRCA9ICc5ODc2NTQnXG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWVPYmplY3QuR2FtZShnYW1lSUQsIHVzZXJEYXRhLnVzZXJJRCwgaW5wdXREYXRhLmdhbWVOYW1lLCBpbnB1dERhdGEueWVhclJlbGVhc2VkLCBpbnB1dERhdGEuZ2VucmUsIGlucHV0RGF0YS5jb25zb2xlLCBpbnB1dERhdGEuZGV2ZWxvcGVyLCBpbnB1dERhdGEuY292ZXIsIGlucHV0RGF0YS5jb2xsZWN0aW9uSUQpO1xuICAgIHRlc3RHYW1lLnByaWNlTW9uaXRvckRhdGEgPSBbXTtcbiAgICBsZXQgdGVzdFdpc2hsaXN0ID0gbmV3IHdpc2hsaXN0Lldpc2hsaXN0KHVzZXJEYXRhLnVzZXJJRCwgaW5wdXREYXRhLmNvbGxlY3Rpb25JRCk7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgY29sbGVjdGlvbk1hbmFnZXIuZ2V0QWxsR2FtZXNJbkNvbGxlY3Rpb24odGVzdFdpc2hsaXN0KTtcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoW3Rlc3RHYW1lXSk7XG59KTtcblxudGVzdChcImxpc3RDb2xsZWN0aW9uc1wiLCBhc3luYyAoKSA9PiB7ICAgIFxuICAgIGxldCBjb2xsZWN0aW9uRGF0YSA9IFtcbiAgICAgICAge1xuICAgICAgICAgICAgdXNlcklEOiBcImVyaWtjaGF1bGtcIixcbiAgICAgICAgICAgIGNvbGxlY3Rpb25JRDogJ0NvbC0yJ1xuICAgICAgICB9XG4gICAgXVxuICAgIGxldCB1c2VySUQgPSBcImVyaWtjaGF1bGtcIlxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGNvbGxlY3Rpb25NYW5hZ2VyLmxpc3RDb2xsZWN0aW9ucyhcImVyaWtjaGF1bGtcIik7XG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKGNvbGxlY3Rpb25EYXRhKTtcbn0pOyJdfQ==