"use strict";
const game = require("../functions/models/game");
const gameManager = require("../functions/dataManager/gameManager");
const httpResponse = require("../functions/shared/common/httpResponse");
const error = require("../functions/error/gameErrorHandler");
const common = require("../functions/shared/common/game");
test("CreateGame", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let defaultCollectionID = `Col-${userID}-Default`;
    let priceMonitorData = [];
    let testCreateGame = new game.Game(gameID, userID, 'League of Legends', 2008, 'Moba', 'PC', 'Riot Games', defaultCollectionID, priceMonitorData);
    let response = await gameManager.createGame(testCreateGame);
    expect(response).toEqual(testCreateGame);
});
test("GetGame", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let defaultCollectionID = `Col-${userID}-Default`;
    let priceMonitorData = [];
    let testGetGame = new game.Game(gameID, userID, 'League of Legends', 2008, 'Moba', 'PC', 'Riot Games', defaultCollectionID, priceMonitorData);
    let response = await gameManager.getGame(testGetGame);
    expect(response).toEqual(testGetGame);
});
test("ModifyGame", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let defaultCollectionID = `Col-${userID}-Default`;
    let priceMonitorData = [];
    let testModifyGame = new game.Game(gameID, userID, 'League of Legends', 2010, 'Moba', 'PC', 'Riot Games', defaultCollectionID, priceMonitorData);
    let response = await gameManager.modifyGame(testModifyGame);
    expect(response).toEqual(testModifyGame);
});
test("DeleteGame", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let defaultCollectionID = `Col-${userID}-Default`;
    let testDeleteGame = new game.Game(gameID, userID, 'League of Legends', 2010, 'Moba', 'PC', 'Riot Games', defaultCollectionID);
    let response = await gameManager.deleteGame(testDeleteGame);
    expect(response).toEqual(testDeleteGame);
});
test("serializeExistingGameData", async () => {
    let data = {
        'gameID': '123456',
        'gameName': 'League of Legends',
        'yearReleased': 2010,
        'genre': 'Moba',
        'console': 'PC',
        'developer': 'Riot Games'
    };
    let userData = {
        userID: 'erikchaulk',
    };
    let defaultCollectionID = `Col-${userData.userID}-Default`;
    let response = common.serializeExistingGameData(userData, data);
    let testDynamoResponse = new game.Game(data.gameID, userData.userID, 'League of Legends', 2010, 'Moba', 'PC', 'Riot Games', defaultCollectionID);
    expect(response).toEqual(testDynamoResponse);
});
test("gameErrorHandler", async () => {
    let testError = new error.GameError('Game not found');
    expect(testError.message).toEqual("Game error, datastore response: Game not found");
});
test("createGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let defaultCollectionID = `Col-${userID}-Default`;
    let priceMonitorData = [];
    let testGame = new game.Game(gameID, userID, 'League of Legends', 2010, 'Moba', 'PC', 'Riot Games', defaultCollectionID, priceMonitorData);
    let response = await httpResponse.createGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 200, body: JSON.stringify(testGame) }));
});
//Game already created
test("createGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let testGame = new game.Game(gameID, userID, 'League of Legends', 2010, 'Moba', 'PC', 'Riot Games');
    let response = await httpResponse.createGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 400, body: "Game Error" }));
});
test("getGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let defaultCollectionID = `Col-${userID}-Default`;
    let priceMonitorData = [];
    let testGame = new game.Game(gameID, userID, 'League of Legends', 2010, 'Moba', 'PC', 'Riot Games', defaultCollectionID, priceMonitorData);
    let response = await httpResponse.getGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 200, body: JSON.stringify(testGame) }));
});
test("modifyGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let defaultCollectionID = `Col-${userID}-Default`;
    let priceMonitorData = [];
    let testGame = new game.Game(gameID, userID, 'League of Legends', 2012, 'Moba', 'PC', 'Riot Games', defaultCollectionID, priceMonitorData);
    let response = await httpResponse.modifyGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 200, body: JSON.stringify(testGame) }));
});
//Modify a game that doesn't exist
test("modifyGameHttpResponse", async () => {
    let gameID = '234567';
    let userID = 'erikchaulk';
    let testGame = new game.Game(gameID, userID, 'The Witness', 2016, 'Strategy', 'PC', 'Valve');
    let response = await httpResponse.modifyGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 400, body: "Game Error" }));
});
test("deleteGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let defaultCollectionID = `Col-${userID}-Default`;
    let testGame = new game.Game(gameID, userID, 'League of Legends', 2012, 'Moba', 'PC', 'Riot Games', defaultCollectionID);
    let response = await httpResponse.deleteGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 200, body: JSON.stringify(testGame) }));
});
//Delete a game that doesn't exist
test("deleteGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let testGame = new game.Game(gameID, userID, 'League of Legends', 2012, 'Moba', 'PC', 'Riot Games');
    let response = await httpResponse.deleteGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 400, body: "Game Error" }));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVuY3Rpb25zLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmdW5jdGlvbnMudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDakQsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLHNDQUFzQyxDQUFDLENBQUM7QUFDcEUsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7QUFDeEUsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLHFDQUFxQyxDQUFDLENBQUE7QUFDNUQsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7QUFFMUQsSUFBSSxDQUFDLFlBQVksRUFBRSxLQUFLLElBQUksRUFBRTtJQUMxQixJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUM7SUFDdEIsSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDO0lBQzFCLElBQUksbUJBQW1CLEdBQUcsT0FBTyxNQUFNLFVBQVUsQ0FBQztJQUNsRCxJQUFJLGdCQUFnQixHQUFHLEVBQVMsQ0FBQztJQUNqQyxJQUFJLGNBQWMsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxtQkFBbUIsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsbUJBQW1CLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQztJQUNqSixJQUFJLFFBQVEsR0FBRyxNQUFNLFdBQVcsQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDNUQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUM3QyxDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSyxJQUFJLEVBQUU7SUFDdkIsSUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDO0lBQ3RCLElBQUksTUFB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LENBQUMsc0JBQXNCLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDbkUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDLEVBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsWUFBWSxFQUFDLENBQUMsQ0FBQyxDQUFDO0FBQy9GLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2FtZSA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvbW9kZWxzL2dhbWVcIik7XG5jb25zdCBnYW1lTWFuYWdlciA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvZGF0YU1hbmFnZXIvZ2FtZU1hbmFnZXJcIik7XG5jb25zdCBodHRwUmVzcG9uc2UgPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL3NoYXJlZC9jb21tb24vaHR0cFJlc3BvbnNlXCIpO1xuY29uc3QgZXJyb3IgPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL2Vycm9yL2dhbWVFcnJvckhhbmRsZXJcIilcbmNvbnN0IGNvbW1vbiA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvc2hhcmVkL2NvbW1vbi9nYW1lXCIpO1xuXG50ZXN0KFwiQ3JlYXRlR2FtZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XG4gICAgbGV0IGRlZmF1bHRDb2xsZWN0aW9uSUQgPSBgQ29sLSR7dXNlcklEfS1EZWZhdWx0YDtcbiAgICBsZXQgcHJpY2VNb25pdG9yRGF0YSA9IFtdIGFzIGFueTtcbiAgICBsZXQgdGVzdENyZWF0ZUdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCAyMDA4LCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJywgZGVmYXVsdENvbGxlY3Rpb25JRCwgcHJpY2VNb25pdG9yRGF0YSk7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZ2FtZU1hbmFnZXIuY3JlYXRlR2FtZSh0ZXN0Q3JlYXRlR2FtZSk7XG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKHRlc3RDcmVhdGVHYW1lKTtcbn0pO1xuXG50ZXN0KFwiR2V0R2FtZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XG4gICAgbGV0IGRlZmF1bHRDb2xsZWN0aW9uSUQgPSBgQ29sLSR7dXNlcklEfS1EZWZhdWx0YDtcbiAgICBsZXQgcHJpY2VNb25pdG9yRGF0YSA9IFtdIGFzIGFueTtcbiAgICBsZXQgdGVzdEdldEdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCAyMDA4LCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJywgZGVmYXVsdENvbGxlY3Rpb25JRCwgcHJpY2VNb25pdG9yRGF0YSk7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZ2FtZU1hbmFnZXIuZ2V0R2FtZSh0ZXN0R2V0R2FtZSk7XG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKHRlc3RHZXRHYW1lKTtcbn0pO1xuXG50ZXN0KFwiTW9kaWZ5R2FtZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XG4gICAgbGV0IGRlZmF1bHRDb2xsZWN0aW9uSUQgPSBgQ29sLSR7dXNlcklEfS1EZWZhdWx0YDtcbiAgICBsZXQgcHJpY2VNb25pdG9yRGF0YSA9IFtdIGFzIGFueTtcbiAgICBsZXQgdGVzdE1vZGlmeUdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCAyMDEwLCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJywgZGVmYXVsdENvbGxlY3Rpb25JRCwgcHJpY2VNb25pdG9yRGF0YSk7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZ2FtZU1hbmFnZXIubW9kaWZ5R2FtZSh0ZXN0TW9kaWZ5R2FtZSk7XG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKHRlc3RNb2RpZnlHYW1lKTtcbn0pO1xuXG50ZXN0KFwiRGVsZXRlR2FtZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XG4gICAgbGV0IGRlZmF1bHRDb2xsZWN0aW9uSUQgPSBgQ29sLSR7dXNlcklEfS1EZWZhdWx0YDtcbiAgICBsZXQgdGVzdERlbGV0ZUdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCAyMDEwLCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJywgZGVmYXVsdENvbGxlY3Rpb25JRCk7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZ2FtZU1hbmFnZXIuZGVsZXRlR2FtZSh0ZXN0RGVsZXRlR2FtZSk7XG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKHRlc3REZWxldGVHYW1lKTtcbn0pO1xuXG50ZXN0KFwic2VyaWFsaXplRXhpc3RpbmdHYW1lRGF0YVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGRhdGEgPSB7XG4gICAgICAgICdnYW1lSUQnOicxMjM0NTYnLFxuICAgICAgICAnZ2FtZU5hbWUnOidMZWFndWUgb2YgTGVnZW5kcycsXG4gICAgICAgICd5ZWFyUmVsZWFzZWQnOjIwMTAsXG4gICAgICAgICdnZW5yZSc6J01vYmEnLFxuICAgICAgICAnY29uc29sZSc6J1BDJyxcbiAgICAgICAgJ2RldmVsb3Blcic6J1Jpb3QgR2FtZXMnXG4gICAgfSBcbiAgICBsZXQgdXNlckRhdGEgPSB7XG4gICAgICAgIHVzZXJJRDogJ2VyaWtjaGF1bGsnLFxuICAgIH1cbiAgICBsZXQgZGVmYXVsdENvbGxlY3Rpb25JRCA9IGBDb2wtJHt1c2VyRGF0YS51c2VySUR9LURlZmF1bHRgO1xuICAgIGxldCByZXNwb25zZSA9IGNvbW1vbi5zZXJpYWxpemVFeGlzdGluZ0dhbWVEYXRhKHVzZXJEYXRhLCBkYXRhKTtcbiAgICBsZXQgdGVzdER5bmFtb1Jlc3BvbnNlID0gbmV3IGdhbWUuR2FtZShkYXRhLmdhbWVJRCwgdXNlckRhdGEudXNlcklELCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCAyMDEwLCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJywgZGVmYXVsdENvbGxlY3Rpb25JRCk7XG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKHRlc3REeW5hbW9SZXNwb25zZSk7XG59KTtcblxudGVzdChcImdhbWVFcnJvckhhbmRsZXJcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCB0ZXN0RXJyb3IgPSBuZXcgZXJyb3IuR2FtZUVycm9yKCdHYW1lIG5vdCBmb3VuZCcpO1xuICAgIGV4cGVjdCh0ZXN0RXJyb3IubWVzc2FnZSkudG9FcXVhbChcIkdhbWUgZXJyb3IsIGRhdGFzdG9yZSByZXNwb25zZTogR2FtZSBub3QgZm91bmRcIik7XG59KTtcblxudGVzdChcImNyZWF0ZUdhbWVIdHRwUmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBnYW1lSUQgPSAnMTIzNDU2JztcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xuICAgIGxldCBkZWZhdWx0Q29sbGVjdGlvbklEID0gYENvbC0ke3VzZXJJRH0tRGVmYXVsdGA7XG4gICAgbGV0IHByaWNlTW9uaXRvckRhdGEgPSBbXSBhcyBhbnk7XG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWUuR2FtZShnYW1lSUQsIHVzZXJJRCwgJ0xlYWd1ZSBvZiBMZWdlbmRzJywgMjAxMCwgJ01vYmEnLCAnUEMnLCAnUmlvdCBHYW1lcycsIGRlZmF1bHRDb2xsZWN0aW9uSUQsIHByaWNlTW9uaXRvckRhdGEpO1xuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGh0dHBSZXNwb25zZS5jcmVhdGVHYW1lSHR0cFJlc3BvbnNlKHRlc3RHYW1lKTtcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoaHR0cFJlc3BvbnNlLmh0dHBSZXNwb25zZSh7c3RhdHVzQ29kZTogMjAwLCBib2R5OiBKU09OLnN0cmluZ2lmeSh0ZXN0R2FtZSl9KSk7XG59KTtcblxuLy9HYW1lIGFscmVhZHkgY3JlYXRlZFxudGVzdChcImNyZWF0ZUdhbWVIdHRwUmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBnYW1lSUQgPSAnMTIzNDU2JztcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xuICAgIGxldCB0ZXN0R2FtZSA9IG5ldyBnYW1lLkdhbWUoZ2FtZUlELCB1c2VySUQsICdMZWFndWUgb2YgTGVnZW5kcycsIDIwMTAsICdNb2JhJywgJ1BDJywgJ1Jpb3QgR2FtZXMnKTtcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBodHRwUmVzcG9uc2UuY3JlYXRlR2FtZUh0dHBSZXNwb25zZSh0ZXN0R2FtZSk7XG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKGh0dHBSZXNwb25zZS5odHRwUmVzcG9uc2Uoe3N0YXR1c0NvZGU6IDQwMCwgYm9keTogXCJHYW1lIEVycm9yXCJ9KSk7XG59KTtcblxudGVzdChcImdldEdhbWVIdHRwUmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBnYW1lSUQgPSAnMTIzNDU2JztcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xuICAgIGxldCBkZWZhdWx0Q29sbGVjdGlvbklEID0gYENvbC0ke3VzZXJJRH0tRGVmYXVsdGA7XG4gICAgbGV0IHByaWNlTW9uaXRvckRhdGEgPSBbXSBhcyBhbnk7XG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWUuR2FtZShnYW1lSUQsIHVzZXJJRCwgJ0xlYWd1ZSBvZiBMZWdlbmRzJywgMjAxMCwgJ01vYmEnLCAnUEMnLCAnUmlvdCBHYW1lcycsIGRlZmF1bHRDb2xsZWN0aW9uSUQsIHByaWNlTW9uaXRvckRhdGEpO1xuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGh0dHBSZXNwb25zZS5nZXRHYW1lSHR0cFJlc3BvbnNlKHRlc3RHYW1lKTtcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoaHR0cFJlc3BvbnNlLmh0dHBSZXNwb25zZSh7c3RhdHVzQ29kZTogMjAwLCBib2R5OiBKU09OLnN0cmluZ2lmeSh0ZXN0R2FtZSl9KSk7XG59KTtcblxudGVzdChcIm1vZGlmeUdhbWVIdHRwUmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBnYW1lSUQgPSAnMTIzNDU2JztcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xuICAgIGxldCBkZWZhdWx0Q29sbGVjdGlvbklEID0gYENvbC0ke3VzZXJJRH0tRGVmYXVsdGA7XG4gICAgbGV0IHByaWNlTW9uaXRvckRhdGEgPSBbXSBhcyBhbnk7XG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWUuR2FtZShnYW1lSUQsIHVzZXJJRCwgJ0xlYWd1ZSBvZiBMZWdlbmRzJywgMjAxMiwgJ01vYmEnLCAnUEMnLCAnUmlvdCBHYW1lcycsIGRlZmF1bHRDb2xsZWN0aW9uSUQsIHByaWNlTW9uaXRvckRhdGEpO1xuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGh0dHBSZXNwb25zZS5tb2RpZnlHYW1lSHR0cFJlc3BvbnNlKHRlc3RHYW1lKTtcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoaHR0cFJlc3BvbnNlLmh0dHBSZXNwb25zZSh7c3RhdHVzQ29kZTogMjAwLCBib2R5OiBKU09OLnN0cmluZ2lmeSh0ZXN0R2FtZSl9KSk7XG59KTtcblxuLy9Nb2RpZnkgYSBnYW1lIHRoYXQgZG9lc24ndCBleGlzdFxudGVzdChcIm1vZGlmeUdhbWVIdHRwUmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xuICAgIGxldCBnYW1lSUQgPSAnMjM0NTY3JztcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xuICAgIGxldCB0ZXN0R2FtZSA9IG5ldyBnYW1lLkdhbWUoZ2FtZUlELCB1c2VySUQsICdUaGUgV2l0bmVzcycsIDIwMTYsICdTdHJhdGVneScsICdQQycsICdWYWx2ZScpO1xuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGh0dHBSZXNwb25zZS5tb2RpZnlHYW1lSHR0cFJlc3BvbnNlKHRlc3RHYW1lKTtcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoaHR0cFJlc3BvbnNlLmh0dHBSZXNwb25zZSh7c3RhdHVzQ29kZTogNDAwLCBib2R5OiBcIkdhbWUgRXJyb3JcIn0pKTtcbn0pO1xuXG50ZXN0KFwiZGVsZXRlR2FtZUh0dHBSZXNwb25zZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XG4gICAgbGV0IGRlZmF1bHRDb2xsZWN0aW9uSUQgPSBgQ29sLSR7dXNlcklEfS1EZWZhdWx0YDtcbiAgICBsZXQgdGVzdEdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCAyMDEyLCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJywgZGVmYXVsdENvbGxlY3Rpb25JRCk7XG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgaHR0cFJlc3BvbnNlLmRlbGV0ZUdhbWVIdHRwUmVzcG9uc2UodGVzdEdhbWUpO1xuICAgIGV4cGVjdChyZXNwb25zZSkudG9FcXVhbChodHRwUmVzcG9uc2UuaHR0cFJlc3BvbnNlKHtzdGF0dXNDb2RlOiAyMDAsIGJvZHk6IEpTT04uc3RyaW5naWZ5KHRlc3RHYW1lKX0pKTtcbn0pO1xuXG4vL0RlbGV0ZSBhIGdhbWUgdGhhdCBkb2Vzbid0IGV4aXN0XG50ZXN0KFwiZGVsZXRlR2FtZUh0dHBSZXNwb25zZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XG4gICAgbGV0IHRlc3RHYW1lID0gbmV3IGdhbWUuR2FtZShnYW1lSUQsIHVzZXJJRCwgJ0xlYWd1ZSBvZiBMZWdlbmRzJywgMjAxMiwgJ01vYmEnLCAnUEMnLCAnUmlvdCBHYW1lcycpO1xuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGh0dHBSZXNwb25zZS5kZWxldGVHYW1lSHR0cFJlc3BvbnNlKHRlc3RHYW1lKTtcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoaHR0cFJlc3BvbnNlLmh0dHBSZXNwb25zZSh7c3RhdHVzQ29kZTogNDAwLCBib2R5OiBcIkdhbWUgRXJyb3JcIn0pKTtcbn0pOyJdfQ==