"use strict";
const game = require("../functions/models/game");
const gameManager = require("../functions/dataManager/gameManager");
const httpResponse = require("../functions/shared/common/httpResponse");
const error = require("../functions/error/gameErrorHandler");
const common = require("../functions/shared/common/game");
test("CreateGame", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testCreateGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2008, 'Moba', 'PC', 'Riot Games');
    let response = await gameManager.createGame(testCreateGame);
    expect(response).toEqual(testCreateGame);
});
test("GetGame", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testGetGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2008, 'Moba', 'PC', 'Riot Games');
    let response = await gameManager.getGame(testGetGame);
    expect(response).toEqual(testGetGame);
});
test("ModifyGame", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testModifyGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2010, 'Moba', 'PC', 'Riot Games');
    let response = await gameManager.modifyGame(testModifyGame);
    expect(response).toEqual(testModifyGame);
});
test("DeleteGame", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testDeleteGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2010, 'Moba', 'PC', 'Riot Games');
    let response = await gameManager.deleteGame(testDeleteGame);
    expect(response).toEqual(testDeleteGame);
});
test("serializeExistingGameData", async () => {
    let data = {
        'id': '123456',
        'gameName': 'League of Legends',
        'yearReleased': 2010,
        'genre': 'Moba',
        'console': 'PC',
        'developer': 'Riot Games'
    };
    let userData = {
        userID: 'erikchaulk',
        email: 'erikchaulk@gmail.com'
    };
    let response = common.serializeExistingGameData(userData, data);
    let testDynamoResponse = new game.Game(data.id, userData.userID, userData.email, 'League of Legends', undefined, undefined, 2010, 'Moba', 'PC', 'Riot Games');
    expect(response).toEqual(testDynamoResponse);
});
test("gameErrorHandler", async () => {
    let testError = new error.GameError('Game not found');
    expect(testError.message).toEqual("Game error, datastore response: Game not found");
});
test("createGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2010, 'Moba', 'PC', 'Riot Games');
    let response = await httpResponse.createGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 200, body: JSON.stringify(testGame) }));
});
//Game already created
test("createGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2010, 'Moba', 'PC', 'Riot Games');
    let response = await httpResponse.createGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 400, body: "Game Error" }));
});
test("getGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2010, 'Moba', 'PC', 'Riot Games');
    let response = await httpResponse.getGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 200, body: JSON.stringify(testGame) }));
});
test("modifyGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2012, 'Moba', 'PC', 'Riot Games');
    let response = await httpResponse.modifyGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 200, body: JSON.stringify(testGame) }));
});
//Modify a game that doesn't exist
test("modifyGameHttpResponse", async () => {
    let gameID = '234567';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testGame = new game.Game(gameID, userID, email, 'The Witness', itemType, 2016, 'Strategy', 'PC', 'Valve');
    let response = await httpResponse.modifyGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 400, body: "Game Error" }));
});
test("deleteGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2012, 'Moba', 'PC', 'Riot Games');
    let response = await httpResponse.deleteGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 200, body: JSON.stringify(testGame) }));
});
//Delete a game that doesn't exist
test("deleteGameHttpResponse", async () => {
    let gameID = '123456';
    let userID = 'erikchaulk';
    let email = 'erikchaulk@gmail.com';
    let itemType = '[GameItem]';
    let testGame = new game.Game(gameID, userID, email, 'League of Legends', itemType, undefined, 2012, 'Moba', 'PC', 'Riot Games');
    let response = await httpResponse.deleteGameHttpResponse(testGame);
    expect(response).toEqual(httpResponse.httpResponse({ statusCode: 400, body: "Game Error" }));
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVuY3Rpb25zLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJmdW5jdGlvbnMudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLDBCQUEwQixDQUFDLENBQUM7QUFDakQsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLHNDQUFzQyxDQUFDLENBQUM7QUFDcEUsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7QUFDeEUsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLHFDQUFxQyxDQUFDLENBQUE7QUFDNUQsTUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7QUFFMUQsSUFBSSxDQUFDLFlBQVksRUFBRSxLQUFLLElBQUksRUFBRTtJQUMxQixJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUM7SUFDdEIsSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDO0lBQzFCLElBQUksS0FBSyxHQUFHLHNCQUFzQixDQUFDO0lBQ25DLElBQUksUUFBUSxHQUFHLFlBQVksQ0FBQztJQUM1QixJQUFJLGNBQWMsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQztJQUN0SSxJQUFJLFFBQVEsR0FBRyxNQUFNLFdBQVcsQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLENBQUM7SUFDNUQsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUM3QyxDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSyxJQUFJLEVBQUU7SUFDdkIsSUFBSSxNQUFNLEdBQUcsUUFBUSxDQUFDO0lBQ3RCLElBQUksTUFBTSxHQUFH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RTtJQUN0QyxJQUFJLE1BQU0sR0FBRyxRQUFRLENBQUM7SUFDdEIsSUFBSSxNQUFNLEdBQUcsWUFBWSxDQUFDO0lBQzFCLElBQUksS0FBSyxHQUFHLHNCQUFzQixDQUFDO0lBQ25DLElBQUksUUFBUSxHQUFHLFlBQVksQ0FBQztJQUM1QixJQUFJLFFBQVEsR0FBRyxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsbUJBQW1CLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxZQUFZLENBQUMsQ0FBQztJQUNoSSxJQUFJLFFBQVEsR0FBRyxNQUFNLFlBQVksQ0FBQyxzQkFBc0IsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNuRSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsRUFBQyxVQUFVLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUMsQ0FBQyxDQUFDLENBQUM7QUFDL0YsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBnYW1lID0gcmVxdWlyZShcIi4uL2Z1bmN0aW9ucy9tb2RlbHMvZ2FtZVwiKTtcclxuY29uc3QgZ2FtZU1hbmFnZXIgPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL2RhdGFNYW5hZ2VyL2dhbWVNYW5hZ2VyXCIpO1xyXG5jb25zdCBodHRwUmVzcG9uc2UgPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL3NoYXJlZC9jb21tb24vaHR0cFJlc3BvbnNlXCIpO1xyXG5jb25zdCBlcnJvciA9IHJlcXVpcmUoXCIuLi9mdW5jdGlvbnMvZXJyb3IvZ2FtZUVycm9ySGFuZGxlclwiKVxyXG5jb25zdCBjb21tb24gPSByZXF1aXJlKFwiLi4vZnVuY3Rpb25zL3NoYXJlZC9jb21tb24vZ2FtZVwiKTtcclxuXHJcbnRlc3QoXCJDcmVhdGVHYW1lXCIsIGFzeW5jICgpID0+IHtcclxuICAgIGxldCBnYW1lSUQgPSAnMTIzNDU2JztcclxuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XHJcbiAgICBsZXQgZW1haWwgPSAnZXJpa2NoYXVsa0BnbWFpbC5jb20nO1xyXG4gICAgbGV0IGl0ZW1UeXBlID0gJ1tHYW1lSXRlbV0nO1xyXG4gICAgbGV0IHRlc3RDcmVhdGVHYW1lID0gbmV3IGdhbWUuR2FtZShnYW1lSUQsIHVzZXJJRCwgZW1haWwsICdMZWFndWUgb2YgTGVnZW5kcycsIGl0ZW1UeXBlLCB1bmRlZmluZWQsIDIwMDgsICdNb2JhJywgJ1BDJywgJ1Jpb3QgR2FtZXMnKTtcclxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGdhbWVNYW5hZ2VyLmNyZWF0ZUdhbWUodGVzdENyZWF0ZUdhbWUpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKHRlc3RDcmVhdGVHYW1lKTtcclxufSk7XHJcblxyXG50ZXN0KFwiR2V0R2FtZVwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICBsZXQgZ2FtZUlEID0gJzEyMzQ1Nic7XHJcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xyXG4gICAgbGV0IGVtYWlsID0gJ2VyaWtjaGF1bGtAZ21haWwuY29tJztcclxuICAgIGxldCBpdGVtVHlwZSA9ICdbR2FtZUl0ZW1dJztcclxuICAgIGxldCB0ZXN0R2V0R2FtZSA9IG5ldyBnYW1lLkdhbWUoZ2FtZUlELCB1c2VySUQsIGVtYWlsLCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCBpdGVtVHlwZSwgdW5kZWZpbmVkLCAyMDA4LCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJyk7XHJcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBnYW1lTWFuYWdlci5nZXRHYW1lKHRlc3RHZXRHYW1lKTtcclxuICAgIGV4cGVjdChyZXNwb25zZSkudG9FcXVhbCh0ZXN0R2V0R2FtZSk7XHJcbn0pO1xyXG5cclxudGVzdChcIk1vZGlmeUdhbWVcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xyXG4gICAgbGV0IHVzZXJJRCA9ICdlcmlrY2hhdWxrJztcclxuICAgIGxldCBlbWFpbCA9ICdlcmlrY2hhdWxrQGdtYWlsLmNvbSc7XHJcbiAgICBsZXQgaXRlbVR5cGUgPSAnW0dhbWVJdGVtXSc7XHJcbiAgICBsZXQgdGVzdE1vZGlmeUdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCBlbWFpbCwgJ0xlYWd1ZSBvZiBMZWdlbmRzJywgaXRlbVR5cGUsIHVuZGVmaW5lZCwgMjAxMCwgJ01vYmEnLCAnUEMnLCAnUmlvdCBHYW1lcycpO1xyXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgZ2FtZU1hbmFnZXIubW9kaWZ5R2FtZSh0ZXN0TW9kaWZ5R2FtZSk7XHJcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwodGVzdE1vZGlmeUdhbWUpO1xyXG59KTtcclxuXHJcbnRlc3QoXCJEZWxldGVHYW1lXCIsIGFzeW5jICgpID0+IHtcclxuICAgIGxldCBnYW1lSUQgPSAnMTIzNDU2JztcclxuICAgIGxldCB1c2VySUQgPSAnZXJpa2NoYXVsayc7XHJcbiAgICBsZXQgZW1haWwgPSAnZXJpa2NoYXVsa0BnbWFpbC5jb20nO1xyXG4gICAgbGV0IGl0ZW1UeXBlID0gJ1tHYW1lSXRlbV0nO1xyXG4gICAgbGV0IHRlc3REZWxldGVHYW1lID0gbmV3IGdhbWUuR2FtZShnYW1lSUQsIHVzZXJJRCwgZW1haWwsICdMZWFndWUgb2YgTGVnZW5kcycsIGl0ZW1UeXBlLCB1bmRlZmluZWQsIDIwMTAsICdNb2JhJywgJ1BDJywgJ1Jpb3QgR2FtZXMnKTtcclxuICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGdhbWVNYW5hZ2VyLmRlbGV0ZUdhbWUodGVzdERlbGV0ZUdhbWUpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKHRlc3REZWxldGVHYW1lKTtcclxufSk7XHJcblxyXG50ZXN0KFwic2VyaWFsaXplRXhpc3RpbmdHYW1lRGF0YVwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICBsZXQgZGF0YSA9IHtcclxuICAgICAgICAnaWQnOicxMjM0NTYnLFxyXG4gICAgICAgICdnYW1lTmFtZSc6J0xlYWd1ZSBvZiBMZWdlbmRzJyxcclxuICAgICAgICAneWVhclJlbGVhc2VkJzoyMDEwLFxyXG4gICAgICAgICdnZW5yZSc6J01vYmEnLFxyXG4gICAgICAgICdjb25zb2xlJzonUEMnLFxyXG4gICAgICAgICdkZXZlbG9wZXInOidSaW90IEdhbWVzJ1xyXG4gICAgfSBcclxuICAgIGxldCB1c2VyRGF0YSA9IHtcclxuICAgICAgICB1c2VySUQ6ICdlcmlrY2hhdWxrJyxcclxuICAgICAgICBlbWFpbDogJ2VyaWtjaGF1bGtAZ21haWwuY29tJ1xyXG4gICAgfVxyXG4gICAgbGV0IHJlc3BvbnNlID0gY29tbW9uLnNlcmlhbGl6ZUV4aXN0aW5nR2FtZURhdGEodXNlckRhdGEsIGRhdGEpO1xyXG4gICAgbGV0IHRlc3REeW5hbW9SZXNwb25zZSA9IG5ldyBnYW1lLkdhbWUoZGF0YS5pZCwgdXNlckRhdGEudXNlcklELCB1c2VyRGF0YS5lbWFpbCwgJ0xlYWd1ZSBvZiBMZWdlbmRzJywgdW5kZWZpbmVkLCB1bmRlZmluZWQsIDIwMTAsICdNb2JhJywgJ1BDJywgJ1Jpb3QgR2FtZXMnKTtcclxuICAgIGV4cGVjdChyZXNwb25zZSkudG9FcXVhbCh0ZXN0RHluYW1vUmVzcG9uc2UpO1xyXG59KTtcclxuXHJcbnRlc3QoXCJnYW1lRXJyb3JIYW5kbGVyXCIsIGFzeW5jICgpID0+IHtcclxuICAgIGxldCB0ZXN0RXJyb3IgPSBuZXcgZXJyb3IuR2FtZUVycm9yKCdHYW1lIG5vdCBmb3VuZCcpO1xyXG4gICAgZXhwZWN0KHRlc3RFcnJvci5tZXNzYWdlKS50b0VxdWFsKFwiR2FtZSBlcnJvciwgZGF0YXN0b3JlIHJlc3BvbnNlOiBHYW1lIG5vdCBmb3VuZFwiKTtcclxufSk7XHJcblxyXG50ZXN0KFwiY3JlYXRlR2FtZUh0dHBSZXNwb25zZVwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICBsZXQgZ2FtZUlEID0gJzEyMzQ1Nic7XHJcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xyXG4gICAgbGV0IGVtYWlsID0gJ2VyaWtjaGF1bGtAZ21haWwuY29tJztcclxuICAgIGxldCBpdGVtVHlwZSA9ICdbR2FtZUl0ZW1dJztcclxuICAgIGxldCB0ZXN0R2FtZSA9IG5ldyBnYW1lLkdhbWUoZ2FtZUlELCB1c2VySUQsIGVtYWlsLCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCBpdGVtVHlwZSwgdW5kZWZpbmVkLCAyMDEwLCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJyk7XHJcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBodHRwUmVzcG9uc2UuY3JlYXRlR2FtZUh0dHBSZXNwb25zZSh0ZXN0R2FtZSk7XHJcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoaHR0cFJlc3BvbnNlLmh0dHBSZXNwb25zZSh7c3RhdHVzQ29kZTogMjAwLCBib2R5OiBKU09OLnN0cmluZ2lmeSh0ZXN0R2FtZSl9KSk7XHJcbn0pO1xyXG5cclxuLy9HYW1lIGFscmVhZHkgY3JlYXRlZFxyXG50ZXN0KFwiY3JlYXRlR2FtZUh0dHBSZXNwb25zZVwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICBsZXQgZ2FtZUlEID0gJzEyMzQ1Nic7XHJcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xyXG4gICAgbGV0IGVtYWlsID0gJ2VyaWtjaGF1bGtAZ21haWwuY29tJztcclxuICAgIGxldCBpdGVtVHlwZSA9ICdbR2FtZUl0ZW1dJztcclxuICAgIGxldCB0ZXN0R2FtZSA9IG5ldyBnYW1lLkdhbWUoZ2FtZUlELCB1c2VySUQsIGVtYWlsLCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCBpdGVtVHlwZSwgdW5kZWZpbmVkLCAyMDEwLCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJyk7XHJcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBodHRwUmVzcG9uc2UuY3JlYXRlR2FtZUh0dHBSZXNwb25zZSh0ZXN0R2FtZSk7XHJcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoaHR0cFJlc3BvbnNlLmh0dHBSZXNwb25zZSh7c3RhdHVzQ29kZTogNDAwLCBib2R5OiBcIkdhbWUgRXJyb3JcIn0pKTtcclxufSk7XHJcblxyXG50ZXN0KFwiZ2V0R2FtZUh0dHBSZXNwb25zZVwiLCBhc3luYyAoKSA9PiB7XHJcbiAgICBsZXQgZ2FtZUlEID0gJzEyMzQ1Nic7XHJcbiAgICBsZXQgdXNlcklEID0gJ2VyaWtjaGF1bGsnO1xyXG4gICAgbGV0IGVtYWlsID0gJ2VyaWtjaGF1bGtAZ21haWwuY29tJztcclxuICAgIGxldCBpdGVtVHlwZSA9ICdbR2FtZUl0ZW1dJztcclxuICAgIGxldCB0ZXN0R2FtZSA9IG5ldyBnYW1lLkdhbWUoZ2FtZUlELCB1c2VySUQsIGVtYWlsLCAnTGVhZ3VlIG9mIExlZ2VuZHMnLCBpdGVtVHlwZSwgdW5kZWZpbmVkLCAyMDEwLCAnTW9iYScsICdQQycsICdSaW90IEdhbWVzJyk7XHJcbiAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCBodHRwUmVzcG9uc2UuZ2V0R2FtZUh0dHBSZXNwb25zZSh0ZXN0R2FtZSk7XHJcbiAgICBleHBlY3QocmVzcG9uc2UpLnRvRXF1YWwoaHR0cFJlc3BvbnNlLmh0dHBSZXNwb25zZSh7c3RhdHVzQ29kZTogMjAwLCBib2R5OiBKU09OLnN0cmluZ2lmeSh0ZXN0R2FtZSl9KSk7XHJcbn0pO1xyXG5cclxudGVzdChcIm1vZGlmeUdhbWVIdHRwUmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xyXG4gICAgbGV0IHVzZXJJRCA9ICdlcmlrY2hhdWxrJztcclxuICAgIGxldCBlbWFpbCA9ICdlcmlrY2hhdWxrQGdtYWlsLmNvbSc7XHJcbiAgICBsZXQgaXRlbVR5cGUgPSAnW0dhbWVJdGVtXSc7XHJcbiAgICBsZXQgdGVzdEdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCBlbWFpbCwgJ0xlYWd1ZSBvZiBMZWdlbmRzJywgaXRlbVR5cGUsIHVuZGVmaW5lZCwgMjAxMiwgJ01vYmEnLCAnUEMnLCAnUmlvdCBHYW1lcycpO1xyXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgaHR0cFJlc3BvbnNlLm1vZGlmeUdhbWVIdHRwUmVzcG9uc2UodGVzdEdhbWUpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKGh0dHBSZXNwb25zZS5odHRwUmVzcG9uc2Uoe3N0YXR1c0NvZGU6IDIwMCwgYm9keTogSlNPTi5zdHJpbmdpZnkodGVzdEdhbWUpfSkpO1xyXG59KTtcclxuXHJcbi8vTW9kaWZ5IGEgZ2FtZSB0aGF0IGRvZXNuJ3QgZXhpc3RcclxudGVzdChcIm1vZGlmeUdhbWVIdHRwUmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IGdhbWVJRCA9ICcyMzQ1NjcnO1xyXG4gICAgbGV0IHVzZXJJRCA9ICdlcmlrY2hhdWxrJztcclxuICAgIGxldCBlbWFpbCA9ICdlcmlrY2hhdWxrQGdtYWlsLmNvbSc7XHJcbiAgICBsZXQgaXRlbVR5cGUgPSAnW0dhbWVJdGVtXSc7XHJcbiAgICBsZXQgdGVzdEdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCBlbWFpbCwgJ1RoZSBXaXRuZXNzJywgaXRlbVR5cGUsIDIwMTYsICdTdHJhdGVneScsICdQQycsICdWYWx2ZScpO1xyXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgaHR0cFJlc3BvbnNlLm1vZGlmeUdhbWVIdHRwUmVzcG9uc2UodGVzdEdhbWUpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKGh0dHBSZXNwb25zZS5odHRwUmVzcG9uc2Uoe3N0YXR1c0NvZGU6IDQwMCwgYm9keTogXCJHYW1lIEVycm9yXCJ9KSk7XHJcbn0pO1xyXG5cclxudGVzdChcImRlbGV0ZUdhbWVIdHRwUmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xyXG4gICAgbGV0IHVzZXJJRCA9ICdlcmlrY2hhdWxrJztcclxuICAgIGxldCBlbWFpbCA9ICdlcmlrY2hhdWxrQGdtYWlsLmNvbSc7XHJcbiAgICBsZXQgaXRlbVR5cGUgPSAnW0dhbWVJdGVtXSc7XHJcbiAgICBsZXQgdGVzdEdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCBlbWFpbCwgJ0xlYWd1ZSBvZiBMZWdlbmRzJywgaXRlbVR5cGUsIHVuZGVmaW5lZCwgMjAxMiwgJ01vYmEnLCAnUEMnLCAnUmlvdCBHYW1lcycpO1xyXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgaHR0cFJlc3BvbnNlLmRlbGV0ZUdhbWVIdHRwUmVzcG9uc2UodGVzdEdhbWUpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKGh0dHBSZXNwb25zZS5odHRwUmVzcG9uc2Uoe3N0YXR1c0NvZGU6IDIwMCwgYm9keTogSlNPTi5zdHJpbmdpZnkodGVzdEdhbWUpfSkpO1xyXG59KTtcclxuXHJcbi8vRGVsZXRlIGEgZ2FtZSB0aGF0IGRvZXNuJ3QgZXhpc3RcclxudGVzdChcImRlbGV0ZUdhbWVIdHRwUmVzcG9uc2VcIiwgYXN5bmMgKCkgPT4ge1xyXG4gICAgbGV0IGdhbWVJRCA9ICcxMjM0NTYnO1xyXG4gICAgbGV0IHVzZXJJRCA9ICdlcmlrY2hhdWxrJztcclxuICAgIGxldCBlbWFpbCA9ICdlcmlrY2hhdWxrQGdtYWlsLmNvbSc7XHJcbiAgICBsZXQgaXRlbVR5cGUgPSAnW0dhbWVJdGVtXSc7XHJcbiAgICBsZXQgdGVzdEdhbWUgPSBuZXcgZ2FtZS5HYW1lKGdhbWVJRCwgdXNlcklELCBlbWFpbCwgJ0xlYWd1ZSBvZiBMZWdlbmRzJywgaXRlbVR5cGUsIHVuZGVmaW5lZCwgMjAxMiwgJ01vYmEnLCAnUEMnLCAnUmlvdCBHYW1lcycpO1xyXG4gICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgaHR0cFJlc3BvbnNlLmRlbGV0ZUdhbWVIdHRwUmVzcG9uc2UodGVzdEdhbWUpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS50b0VxdWFsKGh0dHBSZXNwb25zZS5odHRwUmVzcG9uc2Uoe3N0YXR1c0NvZGU6IDQwMCwgYm9keTogXCJHYW1lIEVycm9yXCJ9KSk7XHJcbn0pOyJdfQ==